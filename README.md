<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [About Keychain][1]
*   [Usage][2]
*   [Operations][3]
    *   [peerplays_keychain][4]
        *   [requestHandshake][5]
            *   [Parameters][6]
        *   [requestEncodeMessage][7]
            *   [Parameters][8]
        *   [requestVerifyKey][9]
            *   [Parameters][10]
        *   [requestSignBuffer][11]
            *   [Parameters][12]
        *   [requestAddAccountAuthority][13]
            *   [Parameters][14]
        *   [requestRemoveAccountAuthority][15]
            *   [Parameters][16]
        *   [requestAddKeyAuthority][17]
            *   [Parameters][18]
        *   [requestRemoveKeyAuthority][19]
            *   [Parameters][20]
        *   [requestBroadcast][21]
            *   [Parameters][22]
        *   [requestSignTx][23]
            *   [Parameters][24]
        *   [requestSignedCall][25]
            *   [Parameters][26]
        *   [requestVote][27]
            *   [Parameters][28]
        *   [requestTransfer][29]
            *   [Parameters][30]
        *   [requestSendToken][31]
            *   [Parameters][32]
        *   [requestDelegation][33]
            *   [Parameters][34]
        *   [requestWitnessVote][35]
            *   [Parameters][36]
        *   [requestProxy][37]
            *   [Parameters][38]
        *   [requestPowerUp][39]
            *   [Parameters][40]
        *   [requestPowerDown][41]
            *   [Parameters][42]
        *   [requestCreateClaimedAccount][43]
            *   [Parameters][44]
        *   [requestCreateProposal][45]
            *   [Parameters][46]
        *   [requestRemoveProposal][47]
            *   [Parameters][48]
        *   [requestUpdateProposalVote][49]
            *   [Parameters][50]
        *   [requestAddAccount][51]
            *   [Parameters][52]

## About Keychain

![][53]

Putting private keys directly into websites is not safe or secure, even ones run by reputable community members. Yet this is currently how nearly every Peerplays-based site or service currently works. On top of that, most Peerplays users likely use their master password which is even worse.

The Peerplays-GUI desktop wallet software is a secure alternative, but it is too difficult to use for the majority of Peerplays users and does not easily interact with websites - which is Peerplays's primary use case.

On Ethereum, you never have to enter your private key into a website to use a dApp. You can just use a browser extension like Metamask, which dApp websites can interface with to securely store your keys and broadcast transactions to the blockchain.

Peerplays Keychain aims to bring the security and ease-of-use of Metamask to the Peerplays blockchain platform.

### Installation

You can download and install the latest published version of the extension for the following browsers:

*   Google Chrome (or Opera/Brave): [on Chrome Store][54]
    *   Export your keys from your wallet (in settings)
    *   Download this repository as zip
    *   Unzip the downloaded folder
    *   Right click on any existing extension > Manage my extensions.
    *   Activate developer mode.
    *   Click "Load Unpacked" and select the unzipped folder.
    *   Import your keys (use the same master password)
*   Firefox: [on Firefox Addon Store][55]

### Features

The Peerplays Keychain extension includes the following features:

*   Store an unlimited number of Peerplays account keys, encrypted with AES
*   View balances, transaction history, and GPOS voting power
*   Send PPY and other token transfers, manage witness votes, and update GPOS powerups right from the extension
*   Manage your Peerplays Engine/DEX tokens
*   Power up or down
*   Securely interact with Peerplays-based websites that have integrated with Peerplays Keychain
*   Manage transaction confirmation preferences by account and by website
*   Locks automatically on browser shutdown or manually using the lock button

### Website Integration

Websites can currently request the Peerplays Keychain extension to perform the following functions / broadcast operations:

*   Send a handshake to make sure the extension is installed
*   Decrypt a message encrypted by a Peerplays account private key (commonly used for "logging in")
*   Broadcast a vote
*   Broadcast Couch Potato operations
*   Send a transfer
*   Send Peerplays DEX tokens
*   Send Delegations
*   Power up/down
*   Vote for witnesses
*   Create/Remove/Vote for proposals
*   Create claimed accounts
*   Sign Tx

## Usage

## Example

An example of a web page that interacts with the extension is included in the "example" folder in the repo. You can test it by running a local HTTP server and going to [http://localhost:1337/main.html][56] in your browser.

`cd example`
`python -m http.server 1337 //or any other method to run a static server`

NOTE: On localhost, it will run on port 1337.

## Using Keychain for logins

To login, you can encode a message from your backend and verify that the user can decode it using the `requestVerifyKey` method.
See an example in this project by @howo (@steempress witness):

[Frontend][57]

[Backend][58]

Alternatively, you can use `requestSignTx` and verify the signature on your backend.

## @peerplaysio/keychain

This [npm module][59] makes it easy to add Keychain support within the browser. It also includes helpful functions to check whether Keychain was used before. It was developed by @therealwolf (witness).

## Operations

The Peerplays Keychain extension will inject a "peerplays_keychain" JavaScript into all web pages opened in the browser while the extension is running. You can therefore check if the current user has the extension installed using the following code:

### peerplays_keychain

Use the `peerplays_keychain` methods listed below to issue requests to the Peerplays blockchain.

#### requestHandshake

This function is called to verify Keychain installation on a user's device

##### Parameters

*   `callback` **[function][60]** Confirms Keychain installation

#### requestEncodeMessage

This function is called to verify that the user has a certain authority over an account, by requesting to decode a message

##### Parameters

*   `username` **[String][61]** Peerplays account to perform the request
*   `receiver` **[String][61]** Account that will decode the string
*   `message` **[String][61]** Message to be encrypted
*   `key` **[String][61]** Type of key. Can be 'Owner','Active' or 'Memo'
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestVerifyKey

This function is called to verify that the user has a certain authority over an account, by requesting to decode a message

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `message` **[String][61]** Message to be decoded by the account
*   `key` **[String][61]** Type of key. Can be 'Owner','Active' or 'Memo'
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestSignBuffer

Requests a message to be signed with proper authority

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request. If null, user can choose the account from a dropdown (optional, default `null`)
*   `message` **[String][61]** Message to be signed by the account
*   `key` **[String][61]** Type of key. Can be 'Posting','Active' or 'Memo'
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)
*   `title` **[String][61]** Override "Sign message" title (optional, default `null`)

#### requestAddAccountAuthority

Requests to add account authority over another account. For more information about multisig, please read [https://peakd.com/utopian-io/@stoodkev/how-to-set-up-and-use-multisignature-accounts-on-steem-blockchain][62]

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `authorizedUsername` **[String][61]** Authorized account
*   `role` **[String][61]** Type of authority. Can be 'Posting','Active' or 'Memo'
*   `weight` **[number][63]** Weight of the authority
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestRemoveAccountAuthority

Requests to remove an account authority over another account. For more information about multisig, please read [https://peakd.com/utopian-io/@stoodkev/how-to-set-up-and-use-multisignature-accounts-on-steem-blockchain][62]

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `authorizedUsername` **[String][61]** Account to lose authority
*   `role` **[String][61]** Type of authority. Can be 'Posting','Active' or 'Memo'
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestAddKeyAuthority

Requests to add a new key authority to an account. For more information about multisig, please read [https://peakd.com/utopian-io/@stoodkev/how-to-set-up-and-use-multisignature-accounts-on-steem-blockchain][62]

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `authorizedKey` **[String][61]** New public key to be associated with the account
*   `role` **[String][61]** Type of authority. Can be 'Owner','Active' or 'Memo'
*   `weight` **[number][63]** Weight of the key authority
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestRemoveKeyAuthority

Requests to remove a key to an account. For more information about multisig, please read [https://peakd.com/utopian-io/@stoodkev/how-to-set-up-and-use-multisignature-accounts-on-steem-blockchain][62]

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `authorizedKey` **[String][61]** Key to be removed (public key).
*   `role` **[String][61]** Type of authority. Can be 'Owner','Active' or 'Memo'.
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestBroadcast

Generic broadcast request

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `operations` **[Array][64]** Array of operations to be broadcasted
*   `key` **[String][61]** Type of key. Can be 'Owner','Active' or 'Memo'
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestSignTx

Requests to sign a transaction with a given authority

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `tx` **[Object][65]** Unsigned transaction
*   `key` **[String][61]** Type of key. Can be 'Owner','Active' or 'Memo'
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestSignedCall

Requests a signed call

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `method` **[String][61]** Method of the call
*   `params` **[String][61]** Parameters of the call
*   `key` **[String][61]** Type of key. Can be 'Posting','Active' or 'Memo'
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestVote

Requests a vote

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `permlink` **[String][61]** Permlink of the blog post
*   `author` **[String][61]** Author of the blog post
*   `weight` **[String][61]** Weight of the vote, comprised between -10,000 (-100%) and 10,000 (100%)
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestTransfer

Requests a transfer

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `to` **[String][61]** Peerplays account to receive the transfer
*   `amount` **[String][61]** Amount to be transfered. Requires 3 decimals.
*   `memo` **[String][61]** The memo will be automatically encrypted if starting by '#' and the memo key is available on Keychain. It will also overrule the account to be enforced, regardless of the 'enforce' parameter
*   `currency` **[String][61]** 'PPY' or 'pBTC'
*   `callback` **[function][60]** Keychain's response to the request
*   `enforce` **[boolean][66]** If set to true, user cannot chose to make the transfer from another account (optional, default `false`)
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestSendToken

Requests a token transfer

##### Parameters

*   `account` **[String][61]** Peerplays account to perform the request
*   `to` **[String][61]** Peerplays account to receive the transfer
*   `amount` **[String][61]** Amount to be transfered. Requires 3 decimals.
*   `memo` **[String][61]** Memo attached to the transfer
*   `currency` **[String][61]** Token to be sent
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestDelegation

Requests a delegation broadcast

##### Parameters

*   `username` **[String][61]** Peerplays account to perform the request. If null, user can choose the account from a dropdown (optional, default `null`)
*   `delegatee` **[String][61]** Account to receive the delegation
*   `amount` **[number][63]** Amount to be transfered. Requires 3 decimals for HP, 6 for VESTS.
*   `unit` **[String][61]** HP or VESTS
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestWitnessVote

Requests a witness vote broadcast

##### Parameters

*   `username`  
*   `witness` **[String][61]** Account to receive the witness vote
*   `vote` **[boolean][66]** Set to true to vote for the witness, false to unvote
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)
*   `account` **[String][61]** Peerplays account to perform the request. If null, user can choose the account from a dropdown (optional, default `null`)

#### requestProxy

Select an account as proxy

##### Parameters

*   `username`  
*   `proxy` **[String][61]** Account to become the proxy. Empty string ('') to remove a proxy
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)
*   `account` **[String][61]** Peerplays account to perform the request. If null, user can choose the account from a dropdown (optional, default `null`)

#### requestPowerUp

Request a power up

##### Parameters

*   `username` **[String][61]** Peerplays account to perform the request
*   `recipient` **[String][61]** Account to receive the power up
*   `ppy` **[number][63]** Amount of PPY to be powered up
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestPowerDown

Request a power down

##### Parameters

*   `username` **[String][61]** Peerplays account to perform the request
*   `gpos_power` **[number][63]** Amount of PPY to be powered down
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestCreateClaimedAccount

Request the creation of an account using claimed tokens

##### Parameters

*   `username` **[String][61]** Peerplays account to perform the request
*   `new_account` **[String][61]** New account to be created
*   `owner` **[object][65]** owner authority object
*   `active` **[object][65]** active authority object
*   `posting` **[object][65]** posting authority object
*   `memo` **[String][61]** public memo key
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestCreateProposal

Request the creation of a proposal

##### Parameters

*   `username` **[String][61]** Peerplays account to perform the request
*   `receiver` **[String][61]** Account receiving the funding if the proposal is voted
*   `subject` **[String][61]** Title of the DAO
*   `permlink` **[String][61]** Permlink to the proposal description
*   `daily_pay` **[number][63]** Daily amount to be received by `receiver`
*   `start` **[Date][67]** Starting date
*   `end` **[Date][67]** Ending date
*   `extensions` **[String][61]** Stringified Array of extensions
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestRemoveProposal

Request the removal of a proposal

##### Parameters

*   `username` **[String][61]** Peerplays account to perform the request
*   `proposal_ids` **[String][61]** Stringified Array of ids of the proposals to be removed
*   `extensions` **[String][61]** Stringified Array of extensions
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestUpdateProposalVote

Vote/Unvote a proposal

##### Parameters

*   `username` **[String][61]** Peerplays account to perform the request
*   `proposal_ids` **[String][61]** Stringified Array of Ids of the proposals to be voted
*   `approve` **[boolean][66]** Set to true to support the proposal, false to remove a vote
*   `extensions` **[String][61]** Stringified Array of extensions
*   `callback` **[function][60]** Keychain's response to the request
*   `rpc` **[String][61]** Override user's RPC settings (optional, default `null`)

#### requestAddAccount

Add a new account to Keychain

##### Parameters

*   `username` **[String][61]** username of the account to be added
*   `keys` **[Object][65]** private keys of the account : {active:'...',posting:'...',memo:'...'}. At least one must be specified.
*   `callback`  

[1]: #about-keychain

[2]: #usage

[3]: #operations

[4]: #peerplays_keychain

[5]: #requesthandshake

[6]: #parameters

[7]: #requestencodemessage

[8]: #parameters-1

[9]: #requestverifykey

[10]: #parameters-2

[11]: #requestsignbuffer

[12]: #parameters-3

[13]: #requestaddaccountauthority

[14]: #parameters-4

[15]: #requestremoveaccountauthority

[16]: #parameters-5

[17]: #requestaddkeyauthority

[18]: #parameters-6

[19]: #requestremovekeyauthority

[20]: #parameters-7

[21]: #requestbroadcast

[22]: #parameters-8

[23]: #requestsigntx

[24]: #parameters-9

[25]: #requestsignedcall

[26]: #parameters-10

[27]: #requestvote

[28]: #parameters-11

[29]: #requesttransfer

[30]: #parameters-12

[31]: #requestsendtoken

[32]: #parameters-13

[33]: #requestdelegation

[34]: #parameters-14

[35]: #requestwitnessvote

[36]: #parameters-15

[37]: #requestproxy

[38]: #parameters-16

[39]: #requestpowerup

[40]: #parameters-17

[41]: #requestpowerdown

[42]: #parameters-18

[43]: #requestcreateclaimedaccount

[44]: #parameters-19

[45]: #requestcreateproposal

[46]: #parameters-20

[47]: #requestremoveproposal

[48]: #parameters-21

[49]: #requestupdateproposalvote

[50]: #parameters-22

[51]: #requestaddaccount

[52]: #parameters-23

[53]: http://u.cubeupload.com/cryptosig/logo.png

[54]: https://chrome.google.com/webstore/detail/peerplays-keychain/

[55]: https://addons.mozilla.org/en-GB/firefox/addon/peerplays-keychain/

[56]: http://localhost:1337/main.html

[57]: https://github.com/drov0/downvote-control-tools-front/blob/c453b81d482421e5ae006c25502c491dbebdc180/src/components/Login.js#L34

[58]: https://github.com/drov0/downvote-control-tool-back/blob/master/routes/auth.js#L159

[59]: https://www.npmjs.com/package/@peerplaysio/keychain

[60]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[61]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[62]: https://peakd.com/utopian-io/@stoodkev/how-to-set-up-and-use-multisignature-accounts-on-steem-blockchain

[63]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[64]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[65]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[66]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[67]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date
